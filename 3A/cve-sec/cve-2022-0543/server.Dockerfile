# pulling the image with the security vulnerability
FROM vulhub/redis:5.0.7
RUN apt update -y && apt install -y openssh-server gnupg
# adding fake_clients with personal data
COPY launch.sh ./server_dump_data.lua redis.conf .
# RUN redis-cli EVAL server_dump_data.lua
#
RUN mkdir /var/run/sshd
RUN echo 'root:root123' | chpasswd
RUN sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config
RUN chmod u+x launch.sh
RUN mkdir ~/.ssh
CMD ./launch.sh
EXPOSE 22
